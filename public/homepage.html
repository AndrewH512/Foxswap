<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Link to CSS file -->
    <link rel="stylesheet" href="css/front-end.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="css/footer.css" />
  </head>

  <body>
    <!-- Header section -->
    <header>
      <h1>Welcome to Foxswap</h1>
      <!-- Clickable Foxswap logo that links to the homepage -->
      <a href="homepage.html">
        <img
          src="uploads/Fox_Swap_Logo.ico"
          alt="Logo"
          class="logo"
          style="
            width: 90px;
            height: 90px;
            position: absolute;
            top: 20px;
            left: 20px;
          "
        />
      </a>
    </header>

    <!-- Navigation bar -->
    <nav>
      <a href="homepage.html"><i class="fas fa-home"></i>Homepage</a>
      <a href="browse.html"><i class="fas fa-search"></i>Browse</a>
      <a href="messages.html"><i class="fas fa-comments"></i>Messages</a>
      <a href="myprofile.html"><i class="fas fa-user"></i>My Profile</a>
      <a href="favorites.html"><i class="fas fa-heart"></i>Favorites</a>
      <a href="post.html"><i class="fas fa-plus-circle"></i>Post</a>
      <a href="yourposts.html"><i class="fas fa-file-alt"></i>Your Posts</a>
      <a href="/public/logout" id="logoutButton"
        ><i class="fas fa-sign-out-alt"></i>Logout</a
      >
    </nav>

    <!-- Main content section -->
    <div class="main-content">
      <!-- Displays Welcome Message to Username -->
      <h1 style="text-align: center" id="usernameDisplay"></h1>
      <p style="text-align: center">
        Buy, sell and save: Your campus marketplace for used textbooks
      </p>

      <!-- Button to navigate to the browse page -->
      <div class="center-text">
        <button
          id="browseButton"
          style="
            padding: 10px 20px;
            font-size: 18px;
            background-color: #b3261e;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
          "
        >
          Go to Browse
        </button>
      </div>
    </div>

    <!-- Got help from Youtube Video: Learn Web -->
    <div class="card-container">
      <style>
        .card-container * {
          margin: 0px;
          padding: 0px;
          box-sizing: border-box;
          font-family: sans-serif;
        }
        .card-container body {
          background-color: #8299b0;
        }
        .card-container {
          display: flex;
          justify-content: center;
          flex-wrap: wrap;
          gap: 25px;
          margin-top: 50px;
        }
        .card {
          width: 325px;
          background-color: white;
          border-color: red;
          border-radius: 10px;
          border-radius: 10px;
          box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.3);
          overflow: hidden;
          transition: transform 0.6s ease;
        }
        .card:hover {
          transform: translateY(-20px);
        }
        .card img {
          width: 100%;
          height: auto;
          object-fit: cover;
        }
        .card-content {
          padding: 20px;
        }
        .card-content h1 {
          font-size: 30px;
          margin-bottom: 10px;
        }
        .card-content p {
          font-size: 18px;
          color: black;
          margin-bottom: 20px;
        }
      </style>
      <div class="card">
        <img src="art/hp1.png" />
        <div class="card-content">
          <h1>About Us</h1>
          <p>
            Are you tired of paying for overpriced books? Are you sick of
            storing textbooks that you’ll never read again? College is expensive
            enough already, and students need all the help they can get. With
            Fox Swap, there’s a better way. Our easy to use website will connect
            you with other students to buy and sell textbooks at reduced prices.
            Simply log in, and begin your journey as a buyer or seller to unlock
            great savings.
          </p>
        </div>
      </div>
      <div class="card">
        <img src="art/hp2.jpeg" />
        <div class="card-content">
          <h1>Meet the Team</h1>
          <p>
            A group of hardworking students that thought of making a change to
            the textbook rental industry. <br />
            <br />
            Mitchell Levy - Team Lead and Backend <br />
            David Ramsaroop - IS Leader and Frontend Developer <br />
            Tania Hernandez-Martinez - Backend Developer<br />
            Andrew Hennessy - Full Stack Developer <br />
            Albiana Krasniqi - Frontend Developer
          </p>
        </div>
      </div>
      <div class="card">
        <img src="art/hp3.jpg" />
        <div class="card-content">
          <h1>Our Mission</h1>
          <p>
            Fox Swap aims to be the easiest place to buy and sell high-quality
            used textbooks. Our mission is to ensure a stress free start to the
            semester and give students an efficient way to save money on their
            textbooks.
          </p>
        </div>
      </div>
    </div>

    <!-- Footer section -->
    <div class="copyrightText">
      <p>&copy; 2024 Foxswap. All rights reserved.</p>
    </div>
    <style>
      .copyrightText {
        width: 100%;
        background: white;
        padding: 20px 100px 30px;
        text-align: center;
        border: 1px solid rgba(0, 0, 0, 0.15);
      }
    </style>

    <script>
      // Extract username from the URL
      const urlParams = new URLSearchParams(window.location.search);
      const username = urlParams.get("username");

      // Display the username in the designated element
      usernameDisplay.textContent = `Hey ${username}, Welcome to Foxswap!`;

      if (username) {
        // Fetch user data from the database based on the username
        fetch(`/api/Users?username=${encodeURIComponent(username)}`)
          .then((response) => response.json())
          .then((data) => {
            console.log(data); // Log the entire response for debugging
            if (data.length > 0) {
              const user = data.find((u) => u.Username === username);
              console.log("what up BOY:  " + user.First_Name);
            } else {
              console.log("User not found.");
            }
          })
          .catch((error) => {
            console.error("Error fetching user data:", error);
          });
      } else {
        console.log("No username found in the URL.");
      }

      // Adding an event listener to the button
      document
        .getElementById("browseButton")
        .addEventListener("click", function () {
          // Construct the URL with the username parameter
          const username = urlParams.get("username");
          if (username) {
            window.location.href = `browse.html?username=${encodeURIComponent(
              username
            )}`;
          } else {
            window.location.href = "browse.html"; // Fallback in case username is not found
          }
        });
    </script>

    <!-- This appends the username to the url.-->
    <script src="js/Append_User.js"></script>

    <!-- Import session check script -->
    <!-- This ensures the user will not be able to skip this page
     by just entering the URL-->
    <script src="js/sessionCheck.js"></script>
  </body>
</html>
